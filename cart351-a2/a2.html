<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0>

  <!-- Library script(s) -->
  <script src="js/libraries/p5.min.js"></script>
  <script src="js/libraries/p5.sound.min.js"></script>

  <title> Picking flowers </title>
  <style>
  body{
    width: 100%;
		height: 100%;
		margin: 0px;
		border: 0;
		overflow: hidden; /*  Disable scrollbars */
		display: block;  /* No floating content on sides */
    padding:0;
  }
  canvas
  {
    background:grey;
    margin:0;
    padding:0;
  }
  </style>
  <script>

  function preload() {

  }

  function setup() {
    createCanvas(windowWidth,windowHeight);
    background("#ffff00");
    imageMode(CENTER);
  }

  function draw() {

  }

  // window.onload = function(){
  //
  //   //Code to resize canvas to window size
  //   (function() {
	// 		var
	// 			// Obtain a reference to the canvas element
	// 			// using its id.
	// 			htmlCanvas = document.getElementById('testCanvas'),
  //
	// 		  	// Obtain a graphics context on the
	// 		  	// canvas element for drawing.
	// 		  	canvasContext = htmlCanvas.getContext('2d');
  //
	// 		// Start listening to resize events and
	// 		// draw canvas.
	// 		initialize();
  //
	// 		function initialize() {
	// 			// Register an event listener to
	// 			// call the resizeCanvas() function each time
	// 			// the window is resized.
	// 			window.addEventListener('resize', resizeCanvas, false);
  //
	// 			// Draw canvas border for the first time.
	// 			resizeCanvas();
	// 		}
  //
	// 		// Display custom canvas.
	// 		// In this case it's a blue, 5 pixel border that
	// 		// resizes along with the browser window.
  //
	// 		// Runs each time the DOM window resize event fires.
	// 		// Resets the canvas dimensions to match window,
	// 		// then draws the new borders accordingly.
	// 		function resizeCanvas() {
	// 			htmlCanvas.width = window.innerWidth;
	// 			htmlCanvas.height = window.innerHeight;
	// 		}
  //
	// 	})(); // end of canvas resize code

    //general code
    let canvas= document.getElementById('testCanvas');
    let canvasContext = canvas.getContext('2d');

    //variables
    let avatarX = canvas.width/2;
    let avatarY = canvas.height/2;
    let radius  = 50;
    let startAngle = 0;
    let endAngle = Math.PI * 2 //full rotation
    let avatarSize;
    let avatarWidth = 30;
    let avatarHeigh = 30;
    let avatarSpeed;
    let canvasPos = getPosition(canvas);
    let mouseX = 0;
    let mouseY = 0;
    let dX = 0;
    let dY = 0;

    // create an "instance"
    let ellipse1 = new myAvatar(canvas.width/2,canvas.height/2,30,"#8ED6FF");

    requestAnimationFrame(runAni);

    // this is our callback function (to simulate a loop ... )
    function runAni(){
      //need to reset the background :)
      // clear the canvas ...
      canvasContext.clearRect(0, 0, canvas.width, canvas.height);
      ellipse1.update();
      ellipse1.render();
      // recursive call ...
      requestAnimationFrame(runAni);
    }

    //code for mouse movement and avatar
    canvas.addEventListener("mousemove", setMousePosition, false);

    function setMousePosition(e) {
      mouseX = e.clientX - canvasPos.x;
      mouseY = e.clientY - canvasPos.y;
    }

    function getPosition(el) {
      var xPosition = 0;
      var yPosition = 0;
     
      while (el) {
        xPosition += (el.offsetLeft - el.scrollLeft + el.clientLeft);
        yPosition += (el.offsetTop - el.scrollTop + el.clientTop);
        el = el.offsetParent;
      }
      return {
        x: xPosition,
        y: yPosition
      };
    }   

    function myAvatar(x,y,r,c){
      //member variables
      this.xPos = x;
      this.yPos = y;
      this.radius = r;
      this.ellipseColor = c;
      // new for updating
      this.xSpeed = 1;
      this.ySpeed = 1;

    //member function
      this.render =function(){
          canvasContext.fillStyle = this.ellipseColor;// change the color we are using
          canvasContext.beginPath();
          canvasContext.arc(this.xPos,this.yPos,this.radius,0, Math.PI * 2, true);
          canvasContext.fill(); // set the fill
          canvasContext.closePath(); //close a path ...
        }

    //member function for updating
      this.update = function(){
        dX = mouseX - this.xPos;
        dY = mouseY - this.yPos;

        this.xPos += (dX / 50);
        this.yPos += (dY / 50);
        }
      } //end mouse movement / avatar code


    // creating some flowers
    let flower1= new flowers(0,1,"marguerite");
    let flower2= new flowers(0,1,"tulipe");
    let flower3= new flowers(0,1,"tournesol");

    //Adding flowers to bouquet
    let bouquet=[];

    //PERSONNAGE PASSE SUR LA FLEUR- EVENT
    if(event)
    {
      bouquet.push();
    }
    // flowers Constructor

    function flowers(x, y, nom)
    {
      this.xPos=x;
      this.yPos=y;
      this.name=nom;

      this.removeFlower=function(){

      }

      this.addFlower=function(){

      }
    }
  }//end window onload


    </script>
  </head>
  <body>
    <canvas id="testCanvas" style = 'position: absolute; left: 0px; top: 0px;' >
  	</canvas>
  </body>
  </html>
